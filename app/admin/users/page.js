'use client'; import { useEffect,useState } from 'react'; export default function UsersPage(){ const [users,setUsers]=useState([]); const [username,setU]=useState(''); const [password,setP]=useState(''); const load=()=>fetch('/api/users').then(r=>r.json()).then(setUsers); useEffect(()=>{load();},[]); const add=async()=>{ await fetch('/api/users',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password,role:'contributor'})}); setU(''); setP(''); load(); }; return (<div className="card p-4"><h1 className="text-2xl font-bold mb-4">ผู้ลงข้อมูล</h1><div className="mb-4 grid sm:grid-cols-3 gap-2"><input className="input" placeholder="username" value={username} onChange={e=>setU(e.target.value)}/><input className="input" placeholder="password" value={password} onChange={e=>setP(e.target.value)}/><button className="btn" onClick={add}>เพิ่มผู้ลงข้อมูล</button></div><ul className="space-y-2">{users.map(u=>(<li key={u._id} className="bg-white/5 p-3 rounded-lg flex justify-between"><span>{u.username} — {u.role}</span></li>))}</ul></div>); }