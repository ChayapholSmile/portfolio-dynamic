import { dbConnect } from '../../../lib/mongodb'; import Blog from '../../../models/Blog'; import Base64Image from '../../../components/Base64Image'; export const dynamic='force-dynamic'; async function getBlog(slug){ await dbConnect(); const blog = await Blog.findOne({slug}); return blog?JSON.parse(JSON.stringify(blog)):null; } export default async function BlogDetail({params}){ const blog = await getBlog(params.slug); if(!blog) return <div className="card p-6">ไม่พบบทความ</div>; return (<article className="prose prose-invert max-w-none">{blog.cover && <Base64Image file={blog.cover} className="w-full max-h-96 object-cover rounded-2xl mb-4"/>}<h1>{blog.title}</h1><p className="text-white/70">{blog.excerpt}</p><div className="whitespace-pre-wrap leading-7">{blog.content}</div></article>); }