import { dbConnect } from '../../../lib/mongodb'; import Model from '../../../models/Education'; import { NextResponse } from 'next/server'; import { getUserFromCookie } from '../../../lib/jwt'; export async function GET(){ await dbConnect(); const items = await Model.find({}).sort({ createdAt:-1 }); return NextResponse.json({ items: JSON.parse(JSON.stringify(items)) }); } export async function POST(req){ await dbConnect(); const me = getUserFromCookie(); if(!me) return NextResponse.json({ error:'unauthorized' }, { status:401 }); const data = await req.json(); const doc = await Model.create({ ...data, createdBy: me.id }); return NextResponse.json({ id: doc._id }); }