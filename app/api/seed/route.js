import { dbConnect } from '../../../lib/mongodb'; import User from '../../../models/User'; import bcrypt from 'bcryptjs'; import { NextResponse } from 'next/server'; export async function POST(){ await dbConnect(); const exists = await User.findOne({ username:'admin' }); if(exists) return NextResponse.json({ ok:true, msg:'exists' }); const hash = await bcrypt.hash('admin', 10); await User.create({ username:'admin', passwordHash:hash, role:'admin', mustChangePassword:true }); return NextResponse.json({ ok:true, msg:'created' }); }